#include "DemoImage.h"

using namespace app;

namespace {
    
    enum {
        TONE_MAX = 7,
    };
#if 0
    const u32 img[8][128] = {
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x22211122, 0x11110011, 0x21110011, 0x21100010, 0x21110000, 0x21110000, 0x11111011, 0x11111111, 0x11111111, 0x11111112, 0x11111134, 0x21001344, 0x11001344, 0x11000344, 0x11000144, 0x10000014, 0x20000001, 0x41100111, 0x30111011, 0x20111111, 0x20111111, 0x10100011, 0x11100001, 0x11100000, 0x11100000, 0x00100000, 0x10110000, 0x20110000, 0x21001000, 0x32210000, 0x22111000, 0x22221100, 0x33321111, 0x21222344, 0x11344444, 0x43234444, 0x24443344, 0x44334433, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x34444444, 0x33334444, 0x44444444, 0x44444444, 0x34444444, 0x32234444, 0x44432444, 0x34444334, 0x22344444, 0x21134444, 0x42213444, 0x14443444, 0x12444444, 0x43244444, 0x33313444, 0x44321244, 0x44444434, 0x33444443, 0x43244444, 0x44422444, 0x11221113, 0x21233332, 0x33222444, 0x44333444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x34444444, 0x44444444, 0x34444444, 0x22224444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444332, 0x43333344, 0x33444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x34444444, 0x44444444, 0x33333333, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x22222222, 0x21111222, 0x11112222, 0x11111122, 0x11111222, 0x11111222, 0x01111222, 0x01122221, 0x11122211, 0x11222111, 0x22222111, 0x22222111, 0x12221111, 0x11221111, 0x11121111, 0x22121110, 0x44444443, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x33333443, 0x33333332, 0x33333332, 0x33333333, 0x22333333, 0x12222333, 0x11100111, 0x11111112, 0x11223333, 0x11112222, 0x12111222, 0x12222123, 0x33333221, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x33334444, 0x33344444, 0x11233333, 0x11112334, 0x22334444, 0x22222334, 0x44431222, 0x34144344, 0x41044424, 0x10044442, 0x00143233, 0x00144433, 0x00344433, 0x00444443, 0x01224444, 0x02221331, 0x03242222, 0x23344214, 0x44444312, 0x44444234, 0x12344444, 0x11112444, 0x22222111, 0x12333432, 0x43333344, 0x44444444, 0x44444444, 0x24444444, 0x42344444, 0x44433444, 0x22232124, 0x31244433, 0x42334444, 0x31232222, 0x42332221, 0x21444444, 0x31223444, 0x43444444, 0x33444444, 0x44444444, 0x34444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x43344444, 0x44444444, 0x33332333, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x23444444, 0x12444444, 0x22444444, 0x12344444, 0x12234444, 0x11234444, 0x11124444, 0x11124444, 0x22224444, 0x12234444, 0x22234444, 0x22334444, 0x22333444, 0x22234444, 0x22234444, 0x22333444, 0x23333444, 0x22333343, 0x22323344, 0x22222223, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x11111122, 0x00011111, 0x00111112, 0x00011111, 0x00001111, 0x00011111, 0x00111110, 0x11111110, 0x10000111, 0x10000111, 0x00000112, 0x00000112, 0x00000111, 0x00000011, 0x00000001, 0x22322222, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x33344444, 0x44444444, 0x33333334, 0x33333333, 0x33333333, 0x33322333, 0x22222323, 0x11112223, 0x11111111, 0x11111111, 0x11111111, 0x00001111, 0x22222100, 0x42222122, 0x22111123, 0x11122333, 0x01111122, 0x33222234, 0x33444444, 0x44444444, 0x34444444, 0x11233333, 0x11233333, 0x12211111, 0x11110110, 0x34200111, 0x44444432, 0x44443344, 0x43100001, 0x41000001, 0x40000000, 0x40000000, 0x42000000, 0x44200000, 0x44431000, 0x44444443, 0x44444443, 0x44444441, 0x44444441, 0x44444244, 0x43444212, 0x42124431, 0x31111112, 0x42124211, 0x44214432, 0x44432444, 0x44443244, 0x13444424, 0x01422443, 0x00101244, 0x00001123, 0x00002221, 0x32024444, 0x42033444, 0x40241123, 0x32343223, 0x12222211, 0x22344444, 0x32112334, 0x31112112, 0x44333344, 0x44444433, 0x44444444, 0x44444444, 0x34444444, 0x11223444, 0x11111234, 0x12244444, 0x11122222, 0x22222222, 0x22222222, 0x12222223, 0x12222222, 0x12222221, 0x22222211, 0x22221111, 0x32211111, 0x32211111, 0x22221111, 0x22221211, 0x12222211, 0x11122211, 0x11111111, 0x12111112, 0x12211111, 0x12211122, 0x22221122, 0x22221112, 0x22221112, 0x22222222, 0x22222222, 0x22222222, 0x22222222, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x11111111, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000011, 0x00000111, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x11111122, 0x44444444, 0x33444444, 0x43332334, 0x44444444, 0x33333334, 0x44444433, 0x44444444, 0x23333233, 0x22333333, 0x22223333, 0x22222223, 0x11111112, 0x11111111, 0x11111111, 0x01111111, 0x01111111, 0x11111111, 0x11111101, 0x11111124, 0x11101444, 0x11014442, 0x11144310, 0x10222123, 0x44444444, 0x44444423, 0x44432234, 0x22332221, 0x22233321, 0x21122111, 0x11121011, 0x11122233, 0x44444444, 0x44444334, 0x44433333, 0x44433233, 0x44333233, 0x44332233, 0x44433334, 0x44443344, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x34444444, 0x44444344, 0x44410000, 0x34400000, 0x34420000, 0x21442000, 0x31244410, 0x11024444, 0x11112444, 0x23111134, 0x23322101, 0x24333211, 0x02444332, 0x11144443, 0x11013444, 0x13211244, 0x11244334, 0x11013444, 0x11111244, 0x00011112, 0x00001111, 0x00000011, 0x00000001, 0x00011111, 0x00011111, 0x00000111, 0x00000011, 0x00000000, 0x00000000, 0x00000011, 0x00011122, 0x00001113, 0x00001112, 0x00011122, 0x01111111, 0x11111111, 0x11211111, 0x12211111, 0x22211111, 0x32211111, 0x33321111, 0x23322111, 0x12222112, 0x12222111, 0x32221111, 0x32211111, 0x32211122, 0x22222222, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x11111111, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00001100, 0x00001111, 0x11223444, 0x44332333, 0x44444444, 0x44444444, 0x33333333, 0x44444444, 0x12223334, 0x22211111, 0x22222221, 0x01112222, 0x00001111, 0x00001111, 0x00000011, 0x00000001, 0x00000000, 0x00000000, 0x00000001, 0x00001111, 0x00111111, 0x00001111, 0x00000011, 0x00000011, 0x00000111, 0x00011123, 0x12344444, 0x44444444, 0x44444433, 0x43222233, 0x21222222, 0x11001111, 0x11011011, 0x21011344, 0x10244444, 0x03444444, 0x24444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x13444444, 0x32444444, 0x43344444, 0x43444444, 0x33444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x24444443, 0x02444333, 0x00012334, 0x01111112, 0x11112100, 0x22223111, 0x23333211, 0x44444421, 0x22244443, 0x00001111, 0x00000000, 0x00000001, 0x00000000, 0x00000111, 0x00000011, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000011, 0x00011122, 0x00111233, 0x00001122, 0x00000011, 0x00000001, 0x00000011, 0x00011122, 0x11223444, 0x12344444, 0x22333333, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x11111111, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x11100000, 0x44444321, 0x44444444, 0x44444444, 0x32333444, 0x44444444, 0x22233344, 0x12211111, 0x00112222, 0x00000011, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000100, 0x00110123, 0x00112444, 0x01244444, 0x14444432, 0x44444211, 0x32111011, 0x00112222, 0x01222222, 0x22222222, 0x22222221, 0x22222211, 0x22222214, 0x11222124, 0x00122144, 0x00000244, 0x00000444, 0x00001444, 0x00001444, 0x00000332, 0x11111123, 0x23444444, 0x44444444, 0x44444444, 0x34444432, 0x34444124, 0x44441014, 0x44410104, 0x12101101, 0x00121110, 0x12222110, 0x12222110, 0x11111100, 0x12222111, 0x34432332, 0x12344443, 0x00122344, 0x11111111, 0x22222110, 0x22332110, 0x22332110, 0x22332110, 0x22332110, 0x23332110, 0x23332110, 0x23332110, 0x23332110, 0x22222110, 0x22111110, 0x11100000, 0x10000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x11110000, 0x11110000, 0x11110000, 0x11110000, 0x11111000, 0x10110000, 0x10010000, 0x00010000, 0x00010000, 0x00000000, 0x00000000, 0x00000000, 0x00011000, 0x00011000, 0x00011000, 0x11111100, 0x11111000, 0x11111111, 0x11221222, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x22221111, 0x11110000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x44443322, 0x44444444, 0x44444444, 0x44444444, 0x33333333, 0x33344444, 0x00011112, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000001, 0x00000001, 0x00000001, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000003, 0x00000144, 0x00001211, 0x00000000, 0x00000001, 0x00000012, 0x00001122, 0x00122222, 0x03311111, 0x44200000, 0x42000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000011, 0x00000112, 0x00000212, 0x00000122, 0x00000034, 0x00000024, 0x00000014, 0x00000004, 0x00000001, 0x00000000, 0x00000001, 0x00000001, 0x00000011, 0x00000011, 0x00000012, 0x00000000, 0x00000000, 0x00000011, 0x00000111, 0x00000111, 0x00011111, 0x00110011, 0x00110011, 0x00110111, 0x00111111, 0x00111111, 0x01111111, 0x00111111, 0x00111111, 0x00111001, 0x00110001, 0x00110000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x11111111, 0x11111111, 0x11111111, 0x11111111, 0x11111111, 0x11111111, 0x11111111, 0x44431110, 0x44441110, 0x44441100, 0x34441110, 0x24441110, 0x24441110, 0x44441111, 0x22431111, 0x00011111, 0x00001111, 0x11111111, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
        {0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x11113343, 0x00001343, 0x00000043, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x33222211, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x43333333, 0x22222222, 0x10000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x22210000, 0x11100000, 0x00111000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000134, 0x00011442, 0x01131100, 0x21100000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x11110000, 0x32211000, 0x32210000, 0x32210000, 0x32100000, 0x21000000, 0x00000000, 0x00000000, 0x10000000, 0x42000000, 0x44100000, 0x44200000, 0x44100000, 0x42100000, 0x21200000, 0x33200000, 0x43200000, 0x43110000, 0x43210000, 0x43210000, 0x44210000, 0x44210000, 0x44210000, 0x44210000, 0x44210000, 0x44210000, 0x44210000, 0x44210000, 0x34310000, 0x34210000, 0x34310000, 0x34421110, 0x34421001, 0x34410001, 0x34410001, 0x34410001, 0x34410001, 0x34410001, 0x24410001, 0x34410002, 0x34410002, 0x33420002, 0x33420001, 0x23420001, 0x23430001, 0x23430002, 0x23320012, 0x12320000, 0x01331000, 0x12332111, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, 0x44444444, },
    };
#else
    const u32 img[8][128] = {
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x21110112, 0x22210122, 0x32210122, 0x32210021, 0x32110000, 0x32120000, 0x21221112, 0x12222222, 0x12222222, 0x12222112, 0x22211246, 0x22102466, 0x22002566, 0x21000466, 0x21000166, 0x11000125, 0x31100001, 0x62100112, 0x51211122, 0x41222222, 0x31122222, 0x21100112, 0x21100002, 0x22100001, 0x11100000, 0x00100000, 0x10210000, 0x20110000, 0x32001000, 0x43320000, 0x22221000, 0x23322210, 0x55432222, 0x32233466, 0x12466666, 0x54346666, 0x35664456, 0x65555654, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x55666666, 0x55556566, 0x66666666, 0x66666666, 0x46666666, 0x43356666, 0x66543566, 0x46666546, 0x33566666, 0x32156666, 0x63224666, 0x26665666, 0x22666666, 0x65356666, 0x55424666, 0x66532466, 0x66666546, 0x44666665, 0x65356666, 0x66543566, 0x22222224, 0x22344544, 0x54323566, 0x55555666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x55666666, 0x66666666, 0x56666666, 0x23345666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666544, 0x54455566, 0x45666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66656666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x56566666, 0x66666666, 0x33233333, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x22112222, 0x32212333, 0x21122333, 0x12222233, 0x22212333, 0x22212333, 0x02212333, 0x01223332, 0x11233322, 0x22233211, 0x33333211, 0x33333212, 0x23332112, 0x22232112, 0x11222112, 0x32222221, 0x66666664, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x55555555, 0x44555543, 0x55555553, 0x54555554, 0x33455555, 0x23333455, 0x21111122, 0x11112222, 0x22335555, 0x22222333, 0x22222342, 0x22333224, 0x55544332, 0x56666666, 0x66666666, 0x66666666, 0x66666666, 0x55666666, 0x55555666, 0x44556666, 0x22354455, 0x12222455, 0x34445666, 0x33333456, 0x66642333, 0x46265465, 0x62056635, 0x20066663, 0x00265245, 0x00266544, 0x00466654, 0x00566664, 0x02335666, 0x03332442, 0x05363443, 0x24566416, 0x66666524, 0x66666456, 0x22566666, 0x21223556, 0x34233211, 0x23555553, 0x64555555, 0x66666556, 0x66666666, 0x46666666, 0x64466666, 0x66644666, 0x33353235, 0x42366544, 0x62455666, 0x42443323, 0x63543332, 0x22666666, 0x42335666, 0x65666666, 0x45666666, 0x66666666, 0x56666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x55556666, 0x66666666, 0x44443444, 0x66666666, 0x66666666, 0x66666666, 0x56666666, 0x35666666, 0x23666666, 0x33666666, 0x23556666, 0x23356666, 0x12256666, 0x11246666, 0x21236666, 0x22236666, 0x23346666, 0x33456666, 0x33455666, 0x33455666, 0x33355666, 0x33355666, 0x33455666, 0x34545566, 0x33544565, 0x33544565, 0x22222223, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x00011111, 0x00122222, 0x00122222, 0x00012222, 0x00002222, 0x00012221, 0x00222210, 0x11121220, 0x21010122, 0x10000122, 0x00000123, 0x00000123, 0x00000122, 0x00000012, 0x00000001, 0x33433333, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x44456666, 0x66666666, 0x55545556, 0x55555445, 0x55445555, 0x45423555, 0x33333435, 0x22222334, 0x11111222, 0x22112122, 0x22222221, 0x11111111, 0x32232101, 0x53333232, 0x33212134, 0x22223455, 0x12222234, 0x44333456, 0x44666666, 0x66666666, 0x55555555, 0x22355555, 0x22355554, 0x22222222, 0x22111111, 0x55301122, 0x66666543, 0x66654556, 0x65200001, 0x62000002, 0x61000000, 0x61000000, 0x63000000, 0x66300000, 0x66642100, 0x66666664, 0x66666664, 0x66666662, 0x66666662, 0x66666366, 0x64666313, 0x63246652, 0x52221222, 0x63125222, 0x66326653, 0x66644666, 0x66665366, 0x24666645, 0x01623665, 0x00201366, 0x00001145, 0x00013432, 0x53036666, 0x63045666, 0x61352234, 0x43555335, 0x23333322, 0x33456666, 0x43223456, 0x52222222, 0x66544466, 0x66666555, 0x66666666, 0x66666666, 0x46666666, 0x12245666, 0x22222355, 0x22466666, 0x22222223, 0x23333323, 0x33333334, 0x23332334, 0x22332333, 0x23333322, 0x33332221, 0x43332222, 0x53322221, 0x43321221, 0x33321221, 0x23332321, 0x23333322, 0x12233322, 0x22122222, 0x23212223, 0x23322212, 0x23322223, 0x33322123, 0x33332123, 0x33322223, 0x23323333, 0x33333333, 0x23333333, 0x22222222, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000011, 0x00000112, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x22222233, 0x66666666, 0x55566666, 0x55443455, 0x66666665, 0x54445555, 0x66666544, 0x56666666, 0x34554445, 0x23555445, 0x33444555, 0x23333334, 0x11112223, 0x21111112, 0x22222221, 0x02222222, 0x12222222, 0x22222221, 0x22222102, 0x22221146, 0x22212666, 0x22126663, 0x21166421, 0x11243234, 0x56666666, 0x66666644, 0x66553356, 0x33443232, 0x33344432, 0x22223222, 0x22221112, 0x22232345, 0x66666666, 0x66665555, 0x66655555, 0x66554355, 0x66554355, 0x66554455, 0x66655555, 0x66665566, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x46666666, 0x66665556, 0x66610000, 0x56600000, 0x56620000, 0x42663000, 0x41366521, 0x12036666, 0x21113666, 0x24222246, 0x45433202, 0x36555321, 0x12665543, 0x11256665, 0x11114666, 0x24322366, 0x12366446, 0x21125666, 0x12211366, 0x00012122, 0x00001221, 0x00000111, 0x00000011, 0x00122211, 0x00012221, 0x00000122, 0x00000012, 0x00000000, 0x00000001, 0x00000022, 0x00012223, 0x00001224, 0x00001223, 0x00011233, 0x11122222, 0x22222211, 0x22221222, 0x23321212, 0x43321221, 0x53321221, 0x55432122, 0x24432222, 0x12333223, 0x23332122, 0x43332112, 0x53321122, 0x53322233, 0x22221222, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00001111, 0x00011112, 0x22235666, 0x66543445, 0x66666666, 0x55566666, 0x54444445, 0x66666666, 0x22334455, 0x32222222, 0x33333332, 0x01222333, 0x00011112, 0x00101111, 0x00000112, 0x00000001, 0x00000000, 0x00000000, 0x00000011, 0x00001122, 0x01122222, 0x00011222, 0x00000112, 0x00000012, 0x00000111, 0x00111234, 0x23466666, 0x66666666, 0x66665554, 0x65333344, 0x32233333, 0x11112211, 0x22011112, 0x31012456, 0x21466666, 0x14666666, 0x36666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x25666666, 0x53666666, 0x65466666, 0x64566666, 0x44666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x36666654, 0x02666555, 0x00023455, 0x11112123, 0x22222211, 0x33344212, 0x34454311, 0x66665532, 0x23466665, 0x00011122, 0x00000001, 0x00000001, 0x00000000, 0x00000122, 0x00000112, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000001, 0x00000012, 0x00111223, 0x00122455, 0x00001233, 0x00000112, 0x00000001, 0x00000012, 0x00122223, 0x22245566, 0x23566666, 0x22233333, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x22110000, 0x66666422, 0x66666666, 0x66666666, 0x44455555, 0x66666666, 0x33344556, 0x23322222, 0x01122333, 0x00000122, 0x00000000, 0x00000000, 0x00000000, 0x10000000, 0x10000000, 0x10000000, 0x10000000, 0x00100000, 0x01000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000111, 0x00220135, 0x01223666, 0x01366666, 0x26666653, 0x66665321, 0x43221112, 0x11122332, 0x12233333, 0x23333332, 0x33333331, 0x33333322, 0x33333325, 0x22333236, 0x00123266, 0x00000366, 0x00001666, 0x00002666, 0x00001666, 0x00000542, 0x22111234, 0x35566666, 0x66666666, 0x66666666, 0x46666653, 0x56666236, 0x66662026, 0x55621116, 0x22212212, 0x01222210, 0x23332210, 0x22232210, 0x22212100, 0x23322222, 0x46543444, 0x23566654, 0x01123456, 0x22222212, 0x33333210, 0x33453220, 0x33443210, 0x33443210, 0x34453210, 0x45553210, 0x35553210, 0x35553210, 0x34543210, 0x33332220, 0x23222110, 0x22100000, 0x10000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x11221000, 0x21110000, 0x21110000, 0x21120000, 0x21122000, 0x10121000, 0x10120000, 0x10120000, 0x00010000, 0x00000000, 0x00000000, 0x00011000, 0x00021000, 0x00021000, 0x00022100, 0x21122100, 0x22222100, 0x11222112, 0x01111111, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x12210000, 0x22210000, 0x11100000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x10000000, 0x66655433, 0x66666666, 0x66666666, 0x66666666, 0x44554444, 0x45555666, 0x00112223, 0x00000012, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000001, 0x00000001, 0x00000002, 0x00000002, 0x00000001, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000004, 0x00000256, 0x00001322, 0x00000000, 0x00000001, 0x00000023, 0x00012233, 0x00233333, 0x14422221, 0x66400000, 0x52000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000012, 0x00000123, 0x00000223, 0x00000233, 0x00000056, 0x00000026, 0x00000016, 0x00000015, 0x00000002, 0x00000000, 0x00000001, 0x00000111, 0x00000012, 0x00000111, 0x00000022, 0x00000000, 0x00000000, 0x00000012, 0x00000122, 0x00000112, 0x00021122, 0x00121122, 0x00121122, 0x00121122, 0x00221112, 0x01221112, 0x01221112, 0x00122222, 0x00222212, 0x00121001, 0x00120001, 0x00120000, 0x00110000, 0x00000000, 0x00000000, 0x00000011, 0x22222222, 0x22222222, 0x22222222, 0x22222222, 0x22222222, 0x11111222, 0x22222122, 0x66652120, 0x66662110, 0x66662200, 0x46662110, 0x36662110, 0x36662110, 0x56662121, 0x34552122, 0x00122222, 0x00011111, 0x00000000, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
        {0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x10013343, 0x00001465, 0x00000054, 0x00000012, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x54433221, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x55454444, 0x43344334, 0x10000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x11110000, 0x33321000, 0x21110000, 0x01121000, 0x00010000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000002, 0x00000156, 0x00012663, 0x11242210, 0x32210000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x10000000, 0x22221000, 0x53321000, 0x43320000, 0x43310000, 0x53200000, 0x31000000, 0x00000000, 0x10000000, 0x20000000, 0x53000000, 0x66100000, 0x66200000, 0x66200000, 0x62210000, 0x32310000, 0x45310000, 0x65310000, 0x64210000, 0x64210000, 0x65320000, 0x66320000, 0x66320000, 0x56310000, 0x56310000, 0x66310000, 0x66310000, 0x66310000, 0x56310000, 0x56410000, 0x46410000, 0x46420000, 0x56522111, 0x56521011, 0x56620001, 0x56620001, 0x46620001, 0x46620001, 0x46620001, 0x46620012, 0x46620002, 0x45620003, 0x45630003, 0x45630002, 0x45640002, 0x35640001, 0x35540003, 0x24530013, 0x22441001, 0x12451000, 0x11231000, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, 0x66666666, },
    };
#endif

}

void DemoImage::init()
{
    super::init();
    mToneNum = 7;
    mShowInfo = true;
    System::BtnInfo &btnUp = mSystem.getBtnUp();
    System::BtnInfo &btnDown = mSystem.getBtnDown();
    btnUp.rep1_count = btnDown.rep1_count = 15;
    btnUp.rep_count = btnDown.rep_count = 5;
    mRender.setAnimSpeed(0);
}

void DemoImage::update()
{
    if (mSystem.getBtnUp().rep) {
        if (++mToneNum > TONE_MAX)
            mToneNum = TONE_MAX;
    }
    if (mSystem.getBtnDown().rep) {
        if (--mToneNum < 2)
            mToneNum = 2;
    }
    if (mSystem.getBtnRed().trg) {
        mRender.setAnimSpeed(mRender.getAnimSpeed() ? 0 : 3);
    }
    if (mSystem.getBtnBlack().trg) {
        mShowInfo = !mShowInfo;
    }
    
    const u32 DM[][TONE_MAX] = {
        { DM_POSITIVE, DM_POSITIVE, DM_POSITIVE, DM_POSITIVE, DM_POSITIVE, DM_NEGATIVE, DM_NEGATIVE, }, // 2
        { DM_POSITIVE, DM_POSITIVE, DM_POSITIVE, DM_PAT_0, DM_PAT_0, DM_PAT_0, DM_NEGATIVE, },          // 3
        { DM_POSITIVE, DM_POSITIVE, DM_PAT_3, DM_PAT_0, DM_PAT_0, DM_PAT_0, DM_NEGATIVE, },             // 4
        { DM_POSITIVE, DM_POSITIVE, DM_PAT_3, DM_PAT_0, DM_PAT_0, DM_PAT_4, DM_NEGATIVE, },             // 5
        { DM_POSITIVE, DM_PAT_5, DM_PAT_3, DM_PAT_0, DM_PAT_0, DM_PAT_4, DM_NEGATIVE, },                // 6
        { DM_POSITIVE, DM_PAT_5, DM_PAT_3, DM_PAT_0, DM_PAT_4, DM_PAT_6, DM_NEGATIVE, },                // 7
    };
    
    for (u8 x = 0; x < 128; ++x) {
        for (u8 y = 0; y < 8; ++y) {
            const u32 p8 = img[y][x];
            for (u8 i = 0; i < 8; ++i) {
                const u8 p = (p8 >> (i << 2)) & 0x7;
#if 0
                switch (p) {
                case 0:
                    mRender.setDrawMode(DM_POSITIVE);
                    break;
                case 1:
                    mRender.setDrawMode(DM_PAT_3);
                    break;
                case 2:
                    mRender.setDrawMode(DM_PAT_0);
                    break;
                case 3:
                    mRender.setDrawMode(DM_PAT_4);
                    break;
                case 4:
                    mRender.setDrawMode(DM_NEGATIVE);
                    break;
                }
#else

                mRender.setDrawMode(DM[mToneNum - 2][p]);
#endif
                mRender.drawPixel(x, (y << 3) + i);
            }
        }
    }
    
    if (mShowInfo) {
        mRender.setDrawMode(DM_POSITIVE_ADD);
        mRender.drawString(0, 0, "%d", mToneNum);
        
        const u8 w = 6;
        const u8 h = Render::SCREEN_HEIGHT / TONE_MAX;
        for (u8 i = 0; i < TONE_MAX; ++i) {
            mRender.setDrawMode(DM[mToneNum - 2][i]);
            mRender.drawFillRect(Render::SCREEN_WIDTH - 1 - w, h * i, w, h);
        }
    }
    mRender.present();
    super::update();
}